<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Beautiful modern refactoring icon with smooth animations -->
  <defs>
    <linearGradient id="codeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:currentColor;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:currentColor;stop-opacity:0.3"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge> 
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- Main container with subtle animation -->
  <rect x="3" y="2" width="18" height="20" rx="3" stroke="url(#codeGradient)" stroke-width="1.5" fill="none" opacity="0.2">
    <animate attributeName="opacity" values="0.2;0.4;0.2" dur="3s" repeatCount="indefinite"/>
  </rect>
  
  <!-- Code blocks with staggered animations -->
  <g transform="translate(5, 5)">
    <rect x="0" y="2" width="8" height="1.5" rx="0.75" fill="currentColor" opacity="0.6">
      <animate attributeName="width" values="8;10;8" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2s" repeatCount="indefinite"/>
    </rect>
    <rect x="0" y="5" width="6" height="1.5" rx="0.75" fill="currentColor" opacity="0.4">
      <animate attributeName="width" values="6;9;6" dur="2.5s" repeatCount="indefinite" begin="0.3s"/>
      <animate attributeName="opacity" values="0.4;0.8;0.4" dur="2.5s" repeatCount="indefinite" begin="0.3s"/>
    </rect>
    <rect x="0" y="8" width="10" height="1.5" rx="0.75" fill="currentColor" opacity="0.7">
      <animate attributeName="width" values="10;7;10" dur="2.2s" repeatCount="indefinite" begin="0.6s"/>
      <animate attributeName="opacity" values="0.7;1;0.7" dur="2.2s" repeatCount="indefinite" begin="0.6s"/>
    </rect>
    <rect x="0" y="11" width="5" height="1.5" rx="0.75" fill="currentColor" opacity="0.5">
      <animate attributeName="width" values="5;8;5" dur="2.8s" repeatCount="indefinite" begin="0.9s"/>
      <animate attributeName="opacity" values="0.5;0.9;0.5" dur="2.8s" repeatCount="indefinite" begin="0.9s"/>
    </rect>
  </g>
  
  <!-- Optimization indicator with pulse effect -->
  <circle cx="18" cy="6" r="3" fill="currentColor" opacity="0.1" filter="url(#glow)">
    <animate attributeName="r" values="3;3.5;3" dur="1.5s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0.1;0.3;0.1" dur="1.5s" repeatCount="indefinite"/>
  </circle>
  <path d="M16.5 6L17.2 6.7L19.5 4.4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0">
    <animate attributeName="opacity" values="0;1;1;0" dur="3s" repeatCount="indefinite"/>
    <animateTransform attributeName="transform" type="scale" values="0.5;1;1;0.5" dur="3s" repeatCount="indefinite"/>
  </path>
  
  <!-- Floating particles -->
  <circle cx="8" cy="18" r="0.5" fill="currentColor" opacity="0.6">
    <animateTransform attributeName="transform" type="translate" values="0,0; -2,-8; 0,0" dur="4s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0.6;0;0.6" dur="4s" repeatCount="indefinite"/>
  </circle>
  <circle cx="15" cy="19" r="0.3" fill="currentColor" opacity="0.4">
    <animateTransform attributeName="transform" type="translate" values="0,0; 3,-10; 0,0" dur="5s" repeatCount="indefinite" begin="1s"/>
    <animate attributeName="opacity" values="0.4;0;0.4" dur="5s" repeatCount="indefinite" begin="1s"/>
  </circle>
</svg>
